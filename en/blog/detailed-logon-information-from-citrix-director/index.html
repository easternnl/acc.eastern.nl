<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">

    <link rel="shortcut icon" href="/favicon.ico">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="Eastern.nl - Performance Engineering for both infrastructure and applications by Erik van Oost using JMeter, LoadRunner and other tools on Linux, Windows, Mainframe, OpenShift, Kubernetes, VMware, Hyper-V and other platforms">


    
        <meta name = "robots" content = "index"><link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/css/brands.min.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">

    
    
    <title>Eastern.nl - Performance Engineering done with passion | Detailed logon information from Citrix Director</title>

    <meta property="og:title" content="Eastern.nl - Performance Engineering done with passion | Detailed logon information from Citrix Director">
    <meta property="og:url" content="https://acc.eastern.nl/en/blog/detailed-logon-information-from-citrix-director/" />
    <meta property="og:locale" content="en" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/images/easternlogo.png">
    <meta property="og:site_name" content="Eastern.nl - Performance Engineering done with passion"/>
    <meta property="og:description" content="Eastern.nl - Performance Engineering for both infrastructure and applications by Erik van Oost using JMeter, LoadRunner and other tools on Linux, Windows, Mainframe, OpenShift, Kubernetes, VMware, Hyper-V and other platforms">

</head><body class="d-flex flex-column min-vh-100"><div class="container">
    <div class="row">
        <div class="col-lg-12 p-0">
            <nav class="navbar navbar-expand-md navbar-light ">
                
                <a class="navbar-brand" aria-label="Home" href="/"><img width="175" height="48"  src="/images/easternlogo.png" alt="" ></a>

                
                <div class="navbar navbar-toggler" style="border: none;"  data-toggle="collapse">

                    

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar" aria-label="Menu">
                    <span class="navbar-toggler-icon"></span>
                </button>
                </div>

                <div class="collapse navbar-collapse justify-content-left" id="collapsibleNavbar">

                    
                    <ul class="navbar-nav">
                        
                        <li class="nav-item">
                            
                            <a class="nav-link" href="/en/">
                                
                                
                                <i data-feather="home"></i> 
                                
                                
                                Home
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            
                            <a class="nav-link" href="/en/pages/services">
                                
                                
                                <i data-feather="services"></i> 
                                
                                
                                Services
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            
                            <a class="nav-link" href="/en/pages/aboutme">
                                
                                
                                <i data-feather="about-me"></i> 
                                
                                
                                About me
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            
                            <a class="nav-link" href="/en/pages/references">
                                
                                
                                <i data-feather="references"></i> 
                                
                                
                                References
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            
                            <a class="nav-link" href="/en/pages/contact">
                                
                                
                                <i data-feather="contact"></i> 
                                
                                
                                Contact
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            
                            <a class="nav-link" href="/en/blog/">
                                
                                
                                <i data-feather="pen-tool"></i> 
                                
                                
                                Blog
                            </a>
                        </li>
                        

                        


                    </ul>
                </div>
            </nav>
        </div>
    </div>
</div>
<div id="content">
<div class="bg-dark">
    <div class="container">
        <div class="row bg-dark text-white" >
            <div class="col-md-12">
                <h1>Detailed logon information from Citrix Director</h1>
            </div>
        </div>
        <div class="row bg-dark text-white" >
            <div class="col-md-8 text-secondary mt-1 mb-3">
                A more detailed analysis of your logon times
            </div>
            <div class="col-md-4 text-secondary mb-2">

                
                    Tags:

                    
                        
                        <a class="text-secondary" href="https://acc.eastern.nl/en/tags/performance">performance</a>
                    
                        
                        <a class="text-secondary" href="https://acc.eastern.nl/en/tags/citrix">citrix</a>
                    
                


                
                    
                    

                    | <time datetime="2015-12-01">Dec 1, 2015</time>

                


            </div>

        </div>
    </div>
</div>



<div class="container">
    <div class="row text-dark bg-white" >
        <div class="col-12 content">

            <h1 id="why-to-have-detailed-logon-information-from-citrix">Why to have detailed logon information from Citrix?</h1>
<p>Sometimes anyone is asking you, the performance is not what we like. Within a Citrix environment it is easy to get into the director to see the overview of the logon times.
By default Citrix Director gives the following information about the logon:</p>
<p><a href="images/citrix-director.png"><img src="images/citrix-director.png" alt=""></a></p>
<p>However average is a good indication, average is not always the best method to measure something. Digging in to the numbers can be needed to get the exceptions clear.
This blog will shortly explain how to get more detailed information from your database.</p>
<h1 id="what-kind-of-results-do-you-get">What kind of results do you get?</h1>
<p>My final report shows the following:</p>
<p><a href="images/graph.png"><img src="images/graph.png" alt=""></a></p>
<p>This gives more detailed information about how long users need to wait for a logon. The data in this graph is based on the field InteractiveDesktop from the query below.</p>
<p>But also any table with detailed information can be made. Or query on user, query on VDI name, e.g.</p>
<h1 id="my-baseline-tools">My baseline tools</h1>
<p>I used the following tools to create this graph:</p>
<pre><code>Microsoft Excel
SQL Server Management Studio
</code></pre>
<p>The results of the query in SQL Server Management Studio can easily copied into Excel. With Pivot tables you can create this kind of graphs.</p>
<h1 id="sql-code">SQL code</h1>
<p>When you run the following query on the Monitoring Database it will give a lot of output.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">/* Citrix Director only gives Average information about logon. 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">This query gives detailed and calculated information about the logontimes. */</span>
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e">/****** Script for SelectTopNRows command from SSMS  ******/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> LogonDuration <span style="color:#f92672">=</span> DATEDIFF(<span style="color:#66d9ef">Second</span>, [LogOnStartDate], [LogOnEndDate])
</span></span><span style="display:flex;"><span>      ,[BrokeringDuration]
</span></span><span style="display:flex;"><span>      ,[AuthenticationDuration]
</span></span><span style="display:flex;"><span>      ,GpoDuration <span style="color:#f92672">=</span> DATEDIFF(<span style="color:#66d9ef">Second</span>, [GpoStartDate], [GpoEndDate])
</span></span><span style="display:flex;"><span>      ,InteractiveDesktop <span style="color:#f92672">=</span> DATEDIFF(<span style="color:#66d9ef">Second</span>, [BrokeringDate],[InteractiveEndDate])
</span></span><span style="display:flex;"><span>      ,FORMAT([BrokeringDate] , <span style="color:#e6db74">&#39;dd-MM-yyyy&#39;</span>) <span style="color:#66d9ef">AS</span> EasyDate
</span></span><span style="display:flex;"><span>      ,FORMAT([BrokeringDate] , <span style="color:#e6db74">&#39;HH&#39;</span>) <span style="color:#66d9ef">AS</span> EasyHour
</span></span><span style="display:flex;"><span>      ,[Name] <span style="color:#66d9ef">AS</span> VM
</span></span><span style="display:flex;"><span>      ,[ClientName]
</span></span><span style="display:flex;"><span>      ,[ClientAddress]
</span></span><span style="display:flex;"><span>      ,[ClientVersion]
</span></span><span style="display:flex;"><span>      ,[ConnectedViaHostName]
</span></span><span style="display:flex;"><span>      ,[ConnectedViaIPAddress]
</span></span><span style="display:flex;"><span>      ,[LaunchedViaHostName]
</span></span><span style="display:flex;"><span>      ,[LaunchedViaIPAddress]     
</span></span><span style="display:flex;"><span>      ,[LogOnStartDate]
</span></span><span style="display:flex;"><span>      ,[LogOnEndDate]
</span></span><span style="display:flex;"><span>      ,[BrokeringDuration]
</span></span><span style="display:flex;"><span>      ,[BrokeringDate]
</span></span><span style="display:flex;"><span>      ,[DisconnectCode]
</span></span><span style="display:flex;"><span>      ,[DisconnectDate]     
</span></span><span style="display:flex;"><span>      ,[ClientSessionValidateDate]
</span></span><span style="display:flex;"><span>      ,[ServerSessionValidateDate]
</span></span><span style="display:flex;"><span>      ,[EstablishmentDate]     
</span></span><span style="display:flex;"><span>      ,[AuthenticationDuration]
</span></span><span style="display:flex;"><span>      ,[GpoStartDate]
</span></span><span style="display:flex;"><span>      ,[GpoEndDate]
</span></span><span style="display:flex;"><span>      ,[LogOnScriptsStartDate]
</span></span><span style="display:flex;"><span>      ,[LogOnScriptsEndDate]
</span></span><span style="display:flex;"><span>      ,[ProfileLoadStartDate]
</span></span><span style="display:flex;"><span>      ,[ProfileLoadEndDate]
</span></span><span style="display:flex;"><span>      ,[InteractiveStartDate]
</span></span><span style="display:flex;"><span>      ,[InteractiveEndDate]     
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">FROM</span> [MonitorData].[<span style="color:#66d9ef">Connection</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> [MonitorData].[<span style="color:#66d9ef">Session</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ON</span> ([MonitorData].[<span style="color:#66d9ef">Connection</span>].[SessionKey] <span style="color:#f92672">=</span> [MonitorData].[<span style="color:#66d9ef">Session</span>].[SessionKey] )
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> [MonitorData].[Machine]
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ON</span> ([MonitorData].[<span style="color:#66d9ef">Session</span>].[MachineId] <span style="color:#f92672">=</span> [MonitorData].[Machine].[Id])
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">Convert</span>(date,[LogOnStartDate]) <span style="color:#f92672">=</span> <span style="color:#66d9ef">Convert</span>(date,GETDATE())
</span></span></code></pre></div><h1 id="conclusion">Conclusion</h1>
<p>Citrix is logging a lot of information in the database, but unfortunately the Director is not showing the information. With SQL query’s there are a lot of options to query this information.
All details about the values in the database can be found here: support.citrix.com
Depending on the Citrix license which is purchased, more or less information is stored in the database. Please keep in mind that old records in the database will be cleared automatically. So make you’re report on time, or create something to save the data.</p>

        </div>
    </div>

</div>



        </div><footer class="mt-auto bg-dark">
    <div class="container">
        
        <div class="row bg-dark text-white mt-3">


                    <div class="col-md-3">
                        <p class="text-uppercase">About Me</p>
                        <p>
                            <i class="fas fa-info"></i>  Erik van Oost has been an IT-freelancer since 2003. His passion for working with computers &amp; people brings him to many places where he works with to improve the IT performance.
                        </p>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <p class="text-uppercase">Contact</p>
                        <p>
                            <i class="fas fa-phone-volume"></i> <a class="text-white" href="tel:+31655118025">+31 6 55 118 025</a>
                        </p>
                        <p>
                            <i class="fas fa-envelope"></i> <a class="text-white" href="mailto:erik@eastern.nl">erik@eastern.nl</a>
                        </p>
                        <p>
                            <i class="fas fa-globe"></i> <a class="text-white" href="http://www.eastern.nl">www.eastern.nl</a>
                        </p>
                        <p>
                            <i class="fas fa-map-marker"></i> Balustrade 20 7325 GP Apeldoorn, The Netherlands
                        </p>
                    </div>

                    <div class="col-md-3 col-sm-6">
                        <p class="text-uppercase">Follow on</p>
                        <p>
                            <i class="fab fa-twitter"></i> <a class="text-white" href="https://twitter.com/eastern_nl">Twitter</a>
                        </p>
                        <p>
                            <i class="fab fa-linkedin-in"></i> <a class="text-white" href="http://nl.linkedin.com/in/erikvanoost">LinkedIn</a>
                        </p>
                        <p>
                            <i class="fab fa-github"></i> <a class="text-white" href="http://github.com/easternnl/">Github</a>
                        </p>
                        <p>
                            <i class="fas fa-clipboard"></i> <a class="text-white" href="http://pastebin.com/u/easternnl">Pastebin</a>
                        </p>
                        <p>
                            <i class="fa-brands fa-docker"></i> <a class="text-white" href="https://hub.docker.com/u/easternnl">Docker Hub</a>
                        </p>
                        <p>
                            <i class="fa-brands fa-stack-overflow"></i> <a class="text-white" href="https://stackoverflow.com/users/9484751/easternnl">Stack Overflow</a>
                        </p>
                    </div>

                   <div class="col-md-3">
                        <p class="text-uppercase"> Blog</p>
                        
                            
                                <p><a class="text-white" href="https://acc.eastern.nl/en/blog/vdi-performance-summit/">VDI Performance Summit</a></p>
                            
                                <p><a class="text-white" href="https://acc.eastern.nl/en/blog/clock-application-with-milliseconds/">Clock application with milliseconds</a></p>
                            
                                <p><a class="text-white" href="https://acc.eastern.nl/en/blog/detailed-logon-information-from-citrix-director/">Detailed logon information from Citrix Director</a></p>
                            
                                <p><a class="text-white" href="https://acc.eastern.nl/en/blog/mount-vmfs-centos-7-linux/">Mount VMFS on Centos 7</a></p>
                            
                       
                            
                       
                    </div>



        </div>
        <div class="row bg-dark text-white">
            <hr>
        </div>
        <div class="row bg-dark text-white ">
            <div class="col-7">
                <p class="text-uppercase text-left">Copyright (C) Eastern 2005 - 2022</p>
            </div>
            <div class="col-5">
                <p class="text-uppercase text-right">
                    <a class="text-white" href="/documents/nederland-ict-voorwaarden-2014.pdf"> Terms &amp; conditions</a>
                </p>
            </div>


        </div>
    </div>
</footer>
<script src="/js/jquery-3.6.1.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/feather.min.js"></script></body>
</html>
